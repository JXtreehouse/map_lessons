{"version":3,"sources":["../../src/utils/log.js"],"names":["formatValue","console","debug","log","cache","priority","table","arg","args","info","once","warn","error","image","message","scale","window","img","Image","onload","logImage","bind","src","element","nodeName","toLowerCase","toDataURL","deprecated","oldUsage","newUsage","removed","group","collapsed","groupCollapsed","groupEnd","time","label","timeEnd","width","height","imageUrl","replace","Math","floor","join","formatArrayValue","v","opts","maxElts","size","string","i","length","terminator","EPSILON","isInteger","Array","isArray","ArrayBuffer","isView","Number","isFinite","String","abs","toFixed","toPrecision","decimal","indexOf","slice"],"mappings":"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","file":"log.js","sourcesContent":["/* eslint-disable no-console */\n/* global console, window, Image */\n\nconsole.debug = console.debug || console.log;\n\nconst cache = {};\n\nconst log = {\n  priority: 0,\n  table(priority, table) {\n    if (priority <= log.priority && table) {\n      console.table(table);\n    }\n  },\n  log(priority, arg, ...args) {\n    if (priority <= log.priority) {\n      console.debug(`luma.gl: ${arg}`, ...args);\n    }\n  },\n  info(priority, arg, ...args) {\n    if (priority <= log.priority) {\n      console.log(`luma.gl: ${arg}`, ...args);\n    }\n  },\n  once(priority, arg, ...args) {\n    if (!cache[arg]) {\n      log.log(priority, arg, ...args);\n      cache[arg] = true;\n    }\n  },\n  warn(arg, ...args) {\n    if (!cache[arg]) {\n      console.warn(`luma.gl: ${arg}`, ...args);\n      cache[arg] = true;\n    }\n  },\n  error(arg, ...args) {\n    console.error(`luma.gl: ${arg}`, ...args);\n  },\n  image({priority, image, message = '', scale = 1}) {\n    if (priority > log.priority) {\n      return;\n    }\n    if (typeof window === 'undefined') { // Let's not try this under node\n      return;\n    }\n    if (typeof image === 'string') {\n      const img = new Image();\n      img.onload = logImage.bind(null, img, message, scale);\n      img.src = image;\n    }\n    const element = image.nodeName || '';\n    if (element.toLowerCase() === 'img') {\n      logImage(image, message, scale);\n    }\n    if (element.toLowerCase() === 'canvas') {\n      const img = new Image();\n      img.onload = logImage.bind(null, img, message, scale);\n      img.src = image.toDataURL();\n    }\n  },\n  deprecated(oldUsage, newUsage) {\n    log.warn(`luma.gl: \\`${oldUsage}\\` is deprecated and will be removed \\\nin a later version. Use \\`${newUsage}\\` instead`);\n  },\n  removed(oldUsage, newUsage) {\n    log.error(`\\`${oldUsage}\\` is no longer supported. Use \\`${newUsage}\\` instead,\\\n   check our Upgrade Guide for more details`);\n  },\n  group(priority, arg, {collapsed = false} = {}) {\n    if (priority <= log.priority) {\n      if (collapsed) {\n        console.groupCollapsed(`luma.gl: ${arg}`);\n      } else {\n        console.group(`luma.gl: ${arg}`);\n      }\n    }\n  },\n  groupEnd(priority, arg) {\n    if (priority <= log.priority) {\n      console.groupEnd(`luma.gl: ${arg}`);\n    }\n  },\n  time(priority, label) {\n    if (priority <= log.priority) {\n      // In case the platform doesn't have console.time\n      if (console.time) {\n        console.time(label);\n      } else {\n        console.info(label);\n      }\n    }\n  },\n  timeEnd(priority, label) {\n    if (priority <= log.priority) {\n      // In case the platform doesn't have console.timeEnd\n      if (console.timeEnd) {\n        console.timeEnd(label);\n      } else {\n        console.info(label);\n      }\n    }\n  }\n};\n\n// Inspired by https://github.com/hughsk/console-image (MIT license)\nfunction logImage(image, message, scale) {\n  const width = image.width * scale;\n  const height = image.height * scale;\n  const imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  console.log(`${message} %c+`, [\n    'font-size:1px;',\n    `padding:${Math.floor(height / 2)}px ${Math.floor(width / 2)}px;`,\n    `line-height:${height}px;`,\n    `background:url(${imageUrl});`,\n    `background-size:${width}px ${height}px;`,\n    'color:transparent;'\n  ].join(''));\n}\n\nfunction formatArrayValue(v, opts) {\n  const {maxElts = 16, size = 1} = opts;\n  let string = '[';\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += `,${(i % size === 0) ? ' ' : ''}`;\n    }\n    string += formatValue(v[i], opts);\n  }\n  const terminator = v.length > maxElts ? '...' : ']';\n  return `${string}${terminator}`;\n}\n\nexport function formatValue(v, opts = {}) {\n  const EPSILON = 1e-16;\n  const {isInteger = false} = opts;\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nexport default log;\n"]}